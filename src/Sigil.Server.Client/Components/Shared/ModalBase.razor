<div class="modal @(IsOpen ? "modal-open" : "") max-md:modal-bottom">
    <div class="modal-box @SizeClass @BoxClass max-md:w-full">
        @if (!string.IsNullOrEmpty(Title))
        {
            <h3 class="font-bold text-lg mb-4">@Title</h3>
        }
        @ChildContent
    </div>
    <div class="modal-backdrop backdrop-blur-sm transition-all" @onclick="HandleBackdropClick"></div>
</div>

@code {
    [Parameter] public bool IsOpen { get; set; }
    [Parameter] public string? Title { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public EventCallback OnClose { get; set; }
    [Parameter] public bool CloseOnBackdropClick { get; set; } = true;
    [Parameter] public ModalSize Size { get; set; } = ModalSize.Medium;

    [Parameter] public string BoxClass { get; set; } = "";

    private string SizeClass => Size switch
    {
        ModalSize.Small  => "md:max-w-md",
        ModalSize.Medium => "md:max-w-2xl",
        ModalSize.Large  => "md:max-w-4xl",
        _                => "md:max-w-2xl"
    };

    private async Task HandleBackdropClick()
    {
        if (CloseOnBackdropClick)
            await OnClose.InvokeAsync();
    }
}
